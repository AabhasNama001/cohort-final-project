import{r as l,A as C,j as a,a as t}from"./index-4181ef86.js";function S(){const{login:h,register:b,logout:v,user:s}=l.useContext(C),[n,i]=l.useState(!1),[r,d]=l.useState(""),[o,c]=l.useState(""),[u,N]=l.useState(""),[g,w]=l.useState(""),[m,f]=l.useState(""),[p,x]=l.useState("user");return a("div",{className:"p-4 bg-white rounded shadow max-w-md mx-auto",children:s?t("div",{children:[t("div",{className:"font-semibold",children:["Welcome ",s.username||s.email]}),t("div",{className:"text-sm text-gray-600",children:["Role: ",s.role]}),a("button",{onClick:v,className:"mt-3 bg-red-500 text-white px-3 py-1 rounded",children:"Logout"})]}):t("div",{children:[t("div",{className:"flex gap-2 mb-4",children:[a("button",{onClick:()=>i(!1),className:`flex-1 p-2 rounded ${n?"bg-gray-100":"bg-blue-600 text-white"}`,children:"Login"}),a("button",{onClick:()=>i(!0),className:`flex-1 p-2 rounded ${n?"bg-blue-600 text-white":"bg-gray-100"}`,children:"Register"})]}),n?t("div",{className:"space-y-2",children:[a("input",{placeholder:"username",value:u,onChange:e=>N(e.target.value),className:"border p-2 w-full"}),t("div",{className:"grid grid-cols-2 gap-2",children:[a("input",{placeholder:"First name",value:g,onChange:e=>w(e.target.value),className:"border p-2 w-full"}),a("input",{placeholder:"Last name",value:m,onChange:e=>f(e.target.value),className:"border p-2 w-full"})]}),a("input",{placeholder:"email",value:r,onChange:e=>d(e.target.value),className:"border p-2 w-full"}),a("input",{placeholder:"password",type:"password",value:o,onChange:e=>c(e.target.value),className:"border p-2 w-full"}),t("select",{value:p,onChange:e=>x(e.target.value),className:"border p-2 w-full",children:[a("option",{value:"user",children:"Customer"}),a("option",{value:"seller",children:"Seller"})]}),t("div",{className:"flex gap-2",children:[a("button",{onClick:async()=>{try{await b({username:u,email:r,password:o,fullName:{firstName:g,lastName:m},role:p}),alert("Registered and logged in")}catch(e){console.error(e),alert("Registration failed")}},className:"bg-green-600 text-white px-4 py-2 rounded",children:"Register"}),a("button",{onClick:()=>i(!1),className:"px-4 py-2 border rounded",children:"Back"})]})]}):t("div",{children:[a("input",{placeholder:"email",value:r,onChange:e=>d(e.target.value),className:"border p-2 w-full mb-2"}),a("input",{placeholder:"password",type:"password",value:o,onChange:e=>c(e.target.value),className:"border p-2 w-full mb-2"}),a("button",{onClick:async()=>{try{await h({email:r,password:o}),alert("Logged in")}catch(e){console.error(e),alert("Login failed")}},className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Login"})]})]})})}export{S as default};
