import{e as h,r as o,a as d,j as r}from"./index-f43a03e2.js";async function p(a){return(await h.get("/ai-buddy/search",{params:{q:a}})).data}function b(){const[a,l]=o.useState(()=>{const e=localStorage.getItem("aiBuddyChat");return e?JSON.parse(e):[]}),[i,c]=o.useState(""),[u,g]=o.useState(!1),x=o.useRef(null);o.useEffect(()=>{var e;localStorage.setItem("aiBuddyChat",JSON.stringify(a)),(e=x.current)==null||e.scrollIntoView({behavior:"smooth"})},[a]);const y=async()=>{if(!i.trim())return;const e={role:"user",text:i};l(t=>[...t,e]),c(""),g(!0);try{const t=await p(e.text);let s=t&&t.ok?t.reply:(t==null?void 0:t.error)||"AI could not respond right now.";try{const n=JSON.parse(s);n.reply&&(s=n.reply)}catch{}l(n=>[...n,{role:"ai",text:s}])}catch{l(s=>[...s,{role:"ai",text:"⚠️ Failed to connect. Please try again."}])}finally{g(!1)}},f=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),y())};return d("div",{className:"flex flex-col h-[90vh] max-w-3xl mx-auto bg-[#efefbf] border-gray-200 shadow-xl rounded-3xl overflow-hidden",children:[r("header",{className:"p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-center font-semibold text-xl tracking-wide",children:"🤖 AI Buddy"}),d("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[a.length===0&&r("div",{className:"text-gray-500 text-center mt-20 text-lg",children:"Start chatting with your AI Buddy ✨"}),a.map((e,t)=>r("div",{className:`flex ${e.role==="user"?"justify-end":"justify-start"}`,children:r("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl text-sm leading-relaxed shadow-sm ${e.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:e.text})},t)),u&&r("div",{className:"flex justify-start",children:r("div",{className:"px-4 py-3 rounded-2xl bg-gray-100 text-gray-500 text-sm animate-pulse",children:"Thinking..."})}),r("div",{ref:x})]}),d("div",{className:"p-4 border-t bg-white flex items-center gap-2",children:[r("textarea",{value:i,onChange:e=>c(e.target.value),onKeyDown:f,placeholder:"Type your message...",rows:"1",className:"flex-1 resize-none rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 transition-all"}),r("button",{onClick:y,disabled:u,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-5 py-2 rounded-xl font-medium hover:shadow-md active:scale-95 transition-all disabled:opacity-60",children:"Send"})]})]})}export{b as default};
