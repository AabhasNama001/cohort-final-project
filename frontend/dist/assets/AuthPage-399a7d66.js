import{r,A as E,j as t,a as o}from"./index-cee4b448.js";import{g as n}from"./index-cf87e9ff.js";function O(){const{login:v,register:N,logout:C,user:c}=r.useContext(E),[x,y]=r.useState(!1),[l,b]=r.useState(""),[i,w]=r.useState(""),[g,R]=r.useState("user"),[m,k]=r.useState(""),[p,S]=r.useState(""),[f,L]=r.useState(""),d=r.useRef(null),u=r.useRef(null);r.useEffect(()=>{x?n.to(d.current,{opacity:0,x:-50,duration:.5,ease:"power2.inOut",onComplete:()=>{n.set(d.current,{display:"none"}),n.set(u.current,{display:"block"}),n.fromTo(u.current,{opacity:0,x:50},{opacity:1,x:0,duration:.6,ease:"power2.inOut"})}}):n.to(u.current,{opacity:0,x:50,duration:.5,ease:"power2.inOut",onComplete:()=>{n.set(u.current,{display:"none"}),n.set(d.current,{display:"block"}),n.fromTo(d.current,{opacity:0,x:-50},{opacity:1,x:0,duration:.6,ease:"power2.inOut"})}})},[x]);const D=()=>!l||!i?(alert("Please fill in all login fields."),!1):!0,K=()=>!m||!p||!f||!l||!i?(alert("Please fill in all registration fields."),!1):!0,h=async()=>{if(D())try{await v({email:l,password:i,role:g}),alert("Logged in successfully!")}catch(e){console.error(e),alert("Login failed")}},s=async()=>{if(K())try{await N({username:m,email:l,password:i,fullName:{firstName:p,lastName:f},role:g}),alert("Registered and logged in!")}catch(e){console.error(e),alert("Registration failed")}},a=(e,P)=>{e.key==="Enter"&&P()};return t("div",{className:" h-[80vh] md:h-[90vh] flex items-center justify-center px-4",children:c?o("div",{className:"p-8 bg-white/70 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-md text-center border border-white/40",children:[t("h2",{className:"text-3xl font-bold mb-2 text-indigo-700",children:"Welcome âœ¨"}),t("p",{className:"text-gray-700 font-medium",children:c.username||c.email}),o("p",{className:"text-sm text-gray-500 mb-6",children:["Role: ",c.role]}),t("button",{onClick:C,className:"bg-gradient-to-r from-red-500 to-pink-500 hover:opacity-90 text-white px-6 py-2 rounded-xl font-semibold shadow-md transition-all",children:"Logout"})]}):o("div",{className:"relative w-full max-w-md bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-white/40",children:[o("div",{ref:d,className:"p-8",children:[t("h2",{className:"text-3xl font-extrabold text-center text-indigo-700 mb-6",children:"Welcome Back ðŸ‘‹"}),t("input",{type:"email",placeholder:"Email",value:l,onChange:e=>b(e.target.value),onKeyDown:e=>a(e,h),className:"border border-gray-300 rounded-lg px-4 py-2 w-full mb-3 focus:ring-2 focus:ring-indigo-400 outline-none"}),t("input",{type:"password",placeholder:"Password",value:i,onChange:e=>w(e.target.value),onKeyDown:e=>a(e,h),className:"border border-gray-300 rounded-lg px-4 py-2 w-full mb-3 focus:ring-2 focus:ring-indigo-400 outline-none"}),o("select",{value:g,onChange:e=>R(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full mb-4 focus:ring-2 focus:ring-indigo-400 outline-none",children:[t("option",{value:"user",children:"Customer"}),t("option",{value:"seller",children:"Seller"})]}),t("button",{onClick:h,className:"bg-gradient-to-r from-indigo-500 to-blue-600 hover:opacity-90 text-white w-full py-2 rounded-lg font-semibold transition-all shadow-md",children:"Login"}),o("p",{className:"text-center text-gray-500 mt-4 text-sm",children:["Donâ€™t have an account?"," ",t("button",{onClick:()=>y(!0),className:"text-indigo-600 font-semibold hover:underline",children:"Register"})]})]}),o("div",{ref:u,className:"p-8 hidden",children:[t("h2",{className:"text-3xl font-extrabold text-center text-indigo-700 mb-6",children:"Create Account âœ¨"}),t("input",{type:"text",placeholder:"Username",value:m,onChange:e=>k(e.target.value),onKeyDown:e=>a(e,s),className:"border border-gray-300 rounded-lg px-4 py-2 w-full mb-3 focus:ring-2 focus:ring-indigo-400 outline-none"}),o("div",{className:"grid grid-cols-2 gap-2",children:[t("input",{type:"text",placeholder:"First Name",value:p,onChange:e=>S(e.target.value),onKeyDown:e=>a(e,s),className:"border border-gray-300 rounded-lg px-4 py-2 w-full focus:ring-2 focus:ring-indigo-400 outline-none"}),t("input",{type:"text",placeholder:"Last Name",value:f,onChange:e=>L(e.target.value),onKeyDown:e=>a(e,s),className:"border border-gray-300 rounded-lg px-4 py-2 w-full focus:ring-2 focus:ring-indigo-400 outline-none"})]}),t("input",{type:"email",placeholder:"Email",value:l,onChange:e=>b(e.target.value),onKeyDown:e=>a(e,s),className:"border border-gray-300 rounded-lg px-4 py-2 w-full mt-3 mb-3 focus:ring-2 focus:ring-indigo-400 outline-none"}),t("input",{type:"password",placeholder:"Password",value:i,onChange:e=>w(e.target.value),onKeyDown:e=>a(e,s),className:"border border-gray-300 rounded-lg px-4 py-2 w-full mb-4 focus:ring-2 focus:ring-indigo-400 outline-none"}),t("button",{onClick:s,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:opacity-90 text-white w-full py-2 rounded-lg font-semibold transition-all shadow-md",children:"Register"}),o("p",{className:"text-center text-gray-500 mt-4 text-sm",children:["Already have an account?"," ",t("button",{onClick:()=>y(!1),className:"text-indigo-600 font-semibold hover:underline",children:"Login"})]})]})]})})}export{O as default};
