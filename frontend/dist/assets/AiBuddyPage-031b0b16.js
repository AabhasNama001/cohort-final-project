import{r,a as i,j as t,b as m}from"./index-4181ef86.js";function b(){const[s,o]=r.useState(()=>{const e=localStorage.getItem("aiBuddyChat");return e?JSON.parse(e):[]}),[d,c]=r.useState(""),[u,g]=r.useState(!1),x=r.useRef(null);r.useEffect(()=>{var e;localStorage.setItem("aiBuddyChat",JSON.stringify(s)),(e=x.current)==null||e.scrollIntoView({behavior:"smooth"})},[s]);const y=async()=>{var n;if(!d.trim())return;const e={role:"user",text:d};o(a=>[...a,e]),c(""),g(!0);try{const a=await m.get("/ai-buddy/search",{params:{q:e.text}}),l=a.data&&a.data.ok?a.data.reply:((n=a.data)==null?void 0:n.error)||"AI could not respond right now.";o(h=>[...h,{role:"ai",text:l}])}catch{o(l=>[...l,{role:"ai",text:"âš ï¸ Failed to connect. Please try again."}])}finally{g(!1)}},f=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),y())};return i("div",{className:"flex flex-col h-[90vh] max-w-3xl mx-auto bg-[#efefbf] border-gray-200 shadow-xl rounded-3xl overflow-hidden",children:[t("header",{className:"p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-center font-semibold text-xl tracking-wide",children:"ðŸ¤– AI Buddy"}),i("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[s.length===0&&t("div",{className:"text-gray-500 text-center mt-20 text-lg",children:"Start chatting with your AI Buddy âœ¨"}),s.map((e,n)=>t("div",{className:`flex ${e.role==="user"?"justify-end":"justify-start"}`,children:t("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl text-sm leading-relaxed shadow-sm ${e.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:e.text})},n)),u&&t("div",{className:"flex justify-start",children:t("div",{className:"px-4 py-3 rounded-2xl bg-gray-100 text-gray-500 text-sm animate-pulse",children:"Thinking..."})}),t("div",{ref:x})]}),i("div",{className:"p-4 border-t bg-white flex items-center gap-2",children:[t("textarea",{value:d,onChange:e=>c(e.target.value),onKeyDown:f,placeholder:"Type your message...",rows:"1",className:"flex-1 resize-none rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 transition-all"}),t("button",{onClick:y,disabled:u,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-5 py-2 rounded-xl font-medium hover:shadow-md active:scale-95 transition-all disabled:opacity-60",children:"Send"})]})]})}export{b as default};
