import{e as h,r as s,a as i,j as a}from"./index-cee4b448.js";async function m(r){return(await h.get("/search",{params:{q:r}})).data}function b(){const[r,n]=s.useState(()=>{const e=localStorage.getItem("aiBuddyChat");return e?JSON.parse(e):[]}),[o,d]=s.useState(""),[c,u]=s.useState(!1),g=s.useRef(null);s.useEffect(()=>{var e;localStorage.setItem("aiBuddyChat",JSON.stringify(r)),(e=g.current)==null||e.scrollIntoView({behavior:"smooth"})},[r]);const x=async()=>{if(!o.trim())return;const e={role:"user",text:o};n(t=>[...t,e]),d(""),u(!0);try{const t=await m(e.text),l=t&&t.ok?t.reply:(t==null?void 0:t.error)||"AI could not respond right now.";n(f=>[...f,{role:"ai",text:l}])}catch{n(l=>[...l,{role:"ai",text:"⚠️ Failed to connect. Please try again."}])}finally{u(!1)}},y=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),x())};return i("div",{className:"flex flex-col h-[90vh] max-w-3xl mx-auto bg-[#efefbf] border-gray-200 shadow-xl rounded-3xl overflow-hidden",children:[a("header",{className:"p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-center font-semibold text-xl tracking-wide",children:"🤖 AI Buddy"}),i("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[r.length===0&&a("div",{className:"text-gray-500 text-center mt-20 text-lg",children:"Start chatting with your AI Buddy ✨"}),r.map((e,t)=>a("div",{className:`flex ${e.role==="user"?"justify-end":"justify-start"}`,children:a("div",{className:`max-w-[75%] px-4 py-3 rounded-2xl text-sm leading-relaxed shadow-sm ${e.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:e.text})},t)),c&&a("div",{className:"flex justify-start",children:a("div",{className:"px-4 py-3 rounded-2xl bg-gray-100 text-gray-500 text-sm animate-pulse",children:"Thinking..."})}),a("div",{ref:g})]}),i("div",{className:"p-4 border-t bg-white flex items-center gap-2",children:[a("textarea",{value:o,onChange:e=>d(e.target.value),onKeyDown:y,placeholder:"Type your message...",rows:"1",className:"flex-1 resize-none rounded-xl border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400 transition-all"}),a("button",{onClick:x,disabled:c,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-5 py-2 rounded-xl font-medium hover:shadow-md active:scale-95 transition-all disabled:opacity-60",children:"Send"})]})]})}export{b as default};
