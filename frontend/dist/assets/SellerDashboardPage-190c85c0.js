import{s as o,r as a,A as x,j as e,a as t}from"./index-f7a2e862.js";import w from"./ProductCreate-90f8407b.js";async function v(){return(await o.get("/seller/dashboard/metrics")).data}async function S(){return(await o.get("/seller/dashboard/orders")).data}async function P(){return(await o.get("/seller/dashboard/products")).data}function j(){const{user:r}=a.useContext(x),[c,f]=a.useState(null),[d,g]=a.useState([]),[n,h]=a.useState([]),[N,i]=a.useState(!0),[u,m]=a.useState(null);a.useEffect(()=>{const s=async()=>{try{i(!0);const[l,p,b]=await Promise.all([v(),S(),P()]);f(l),g(p.orders||p||[]),h(b.products||b||[])}catch(l){console.error("Failed to load seller dashboard:",l),m("Could not load your data.")}finally{i(!1)}};(r==null?void 0:r.role)==="seller"?s():(i(!1),m("You do not have permission to view this page."))},[r]);const y=s=>{h(l=>[s,...l])};return N?e("div",{className:"p-6",children:"Loading your dashboard..."}):u?e("div",{className:"p-6 text-red-500",children:u}):(r==null?void 0:r.role)!=="seller"?e("div",{className:"p-6",children:"Unauthorized."}):t("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e("h1",{className:"text-3xl font-bold mb-6",children:"Seller Dashboard"}),t("section",{className:"mb-8 p-6 bg-white rounded-lg shadow",children:[e("h2",{className:"text-2xl font-semibold mb-4",children:"Metrics"}),c?e("pre",{className:"bg-gray-100 p-4 rounded overflow-auto",children:JSON.stringify(c,null,2)}):e("p",{children:"No metrics available."})]}),t("section",{className:"mb-8 p-6 bg-white rounded-lg shadow",children:[e("h2",{className:"text-2xl font-semibold mb-4",children:"Create New Product"}),e(w,{onProductCreated:y})]}),t("section",{className:"mb-8",children:[t("h2",{className:"text-2xl font-semibold mb-4",children:["My Products (",n.length,")"]}),e("div",{className:"bg-white p-4 rounded shadow",children:e("ul",{className:"divide-y divide-gray-200",children:n.length>0?n.map(s=>t("li",{className:"py-3 flex justify-between items-center",children:[e("span",{children:s.name}),t("span",{className:"font-medium",children:["$",s.price]})]},s._id)):e("p",{children:"You have not created any products yet."})})})]}),t("section",{children:[t("h2",{className:"text-2xl font-semibold mb-4",children:["Orders to Fulfill (",d.length,")"]}),e("div",{className:"bg-white p-4 rounded shadow",children:e("ul",{className:"divide-y divide-gray-200",children:d.length>0?d.map(s=>t("li",{className:"py-3 flex justify-between items-center",children:[t("span",{children:["Order ID: ",s._id]}),e("span",{className:"capitalize px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:s.status})]},s._id)):e("p",{children:"No orders to fulfill."})})})]})]})}export{j as default};
